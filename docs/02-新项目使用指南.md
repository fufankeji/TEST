# 新项目使用指南

> 每个新项目的配置步骤和开发规范

---

## 一、首次使用（一次性配置）

### 1.1 安装工具

| 工具 | 下载地址 | 说明 |
|------|----------|------|
| Cursor | https://cursor.sh | AI 代码编辑器 |
| Git | https://git-scm.com | 版本控制 |
| Node.js | https://nodejs.org | MCP 运行环境 |

### 1.2 注册 Linear

1. 访问 https://linear.app
2. 注册账号
3. 创建 Workspace（工作区）

### 1.3 配置 Linear MCP

**步骤：**

1. 打开 Cursor
2. 进入 Settings → MCP
3. 点击 "Add new global MCP server"
4. 粘贴以下配置：

```json
{
  "mcpServers": {
    "Linear": {
      "command": "npx",
      "args": ["-y", "mcp-remote", "https://mcp.linear.app/mcp"]
    }
  }
}
```

5. 保存，浏览器会弹出授权页面
6. 点击 "Authorize" 完成授权

### 1.4 配置 Git

```bash
git config --global user.name "你的名字"
git config --global user.email "你的邮箱"
```

---

## 二、创建新项目

### 2.1 在 Linear 创建团队

1. 进入 Linear
2. 点击左侧 "+" 创建新团队
3. 设置团队信息：
   - **Team Name**: 项目名称（如 `用户认证系统`）
   - **Identifier**: 团队 Key（如 `AUTH`）

> ⚠️ **Identifier 很重要**，它决定了 Issue ID 的前缀！
> 
> 设置 `AUTH` → Issue 为 AUTH-1, AUTH-2...
> 设置 `SHOP` → Issue 为 SHOP-1, SHOP-2...

**推荐的 Key 命名：**

| 项目类型 | 推荐 Key |
|----------|----------|
| 认证系统 | AUTH |
| 电商平台 | SHOP |
| 博客系统 | BLOG |
| 管理后台 | ADMIN |
| API 服务 | API |
| 移动应用 | APP |

### 2.2 创建本地项目

```bash
# 1. 创建项目目录
mkdir my-project
cd my-project

# 2. 初始化 Git
git init

# 3. 创建 .gitignore
echo "node_modules/
.env
.DS_Store" > .gitignore
```

### 2.3 添加 .cursorrules 文件

在项目根目录创建 `.cursorrules` 文件：

```markdown
# AI 驱动开发工作流规范

## 项目配置

```yaml
project:
  name: "你的项目名"        # 修改为实际项目名
  team: "你的团队名"        # 修改为 Linear 团队名
```

## 触发词映射

| 用户说 | AI 执行 |
|--------|---------|
| "创建项目 XXX" | 创建 Project + Issues |
| "新建任务 XXX" | 创建 Issue |
| "开始做 `<ID>`" | Issue → In Progress |
| "完成了" | Issue → Done + 生成 commit |
| "列出任务" | 显示任务列表 |
| "提交代码" | git add + commit + push |

## Git 规范

### 分支命名
```
feature/<ID>-描述
fix/<ID>-描述
```

### Commit Message
```
feat(模块): 描述 <ID>
fix(模块): 描述 <ID>
```
```

### 2.4 首次提交

```bash
git add .
git commit -m "chore: 初始化项目"
```

### 2.5 推送到 GitHub（可选）

```bash
# 在 GitHub 创建仓库后
git remote add origin https://github.com/你的用户名/项目名.git
git push -u origin main
```

---

## 三、日常开发流程

### 3.1 每日流程

```
┌─────────────────────────────────────────────┐
│                 每日开发                     │
├─────────────────────────────────────────────┤
│                                             │
│  1. 查看任务                                 │
│     "列出待办任务"                           │
│              ↓                              │
│  2. 领取任务                                 │
│     "开始做 AUTH-1"                          │
│              ↓                              │
│  3. 开发代码                                 │
│     正常编写代码...                          │
│              ↓                              │
│  4. 阶段性提交（可选）                        │
│     "提交一下"                               │
│              ↓                              │
│  5. 完成任务                                 │
│     "完成了"                                 │
│              ↓                              │
│  6. 查看进度                                 │
│     "项目进度"                               │
│                                             │
└─────────────────────────────────────────────┘
```

### 3.2 常用指令

| 场景 | 说什么 |
|------|--------|
| 查看待办 | "列出任务" / "待办" / "todo" |
| 领取任务 | "开始做 AUTH-1" / "领取 AUTH-1" |
| 完成任务 | "完成了" / "搞定" / "done" |
| 提交代码 | "提交代码" / "提交" / "push" |
| 查看进度 | "项目进度" / "进度" |
| 新建任务 | "新建任务：XXX" |
| 取消任务 | "取消 AUTH-1" |

---

## 四、开发规范

### 4.1 任务管理规范

**任务粒度：**
- 每个任务 1-4 小时可完成
- 太大要拆分，太小可合并

**任务状态：**
- `Todo` - 待开始
- `In Progress` - 开发中（同时只做一个）
- `Done` - 已完成
- `Canceled` - 已取消

**优先级：**
- 🔥 Urgent - 立即处理
- 🔴 High - 当天完成
- 🟡 Medium - 本周完成
- 🟢 Low - 有空再做

### 4.2 Git 规范

**分支命名：**

```
<type>/<issue-id>-<description>

示例：
feature/AUTH-1-user-login
fix/AUTH-5-password-error
docs/AUTH-3-api-docs
```

**Commit Message：**

```
<type>(<scope>): <description> <issue-id>

示例：
feat(auth): 实现用户登录 AUTH-1
fix(auth): 修复密码验证 AUTH-5
docs: 更新接口文档 AUTH-3
```

**Type 类型：**

| Type | 用途 |
|------|------|
| feat | 新功能 |
| fix | Bug 修复 |
| docs | 文档 |
| style | 格式/样式 |
| refactor | 重构 |
| test | 测试 |
| chore | 杂项 |

### 4.3 一个任务的完整流程

```bash
# 1. 领取任务（对 AI 说）
"开始做 AUTH-1"

# 2. 创建分支
git checkout -b feature/AUTH-1-user-login

# 3. 开发代码...

# 4. 阶段性提交（对 AI 说）
"提交一下"
# AI 会生成: feat(auth): 添加登录表单 AUTH-1

# 5. 继续开发...

# 6. 完成任务（对 AI 说）
"完成了"
# AI 会: 更新状态为 Done + 最终提交

# 7. 合并到主分支
git checkout main
git merge feature/AUTH-1-user-login
git push

# 8. 删除功能分支
git branch -d feature/AUTH-1-user-login
```

---

## 五、文件结构

一个标准项目的结构：

```
my-project/
├── .cursorrules          # AI 规则配置（必须）
├── .gitignore            # Git 忽略文件
├── README.md             # 项目说明
├── src/                  # 源代码
│   └── ...
└── ...
```

---

## 六、故障排除

### Linear MCP 连接失败

```bash
# 检查端口占用
netstat -ano | findstr :22227

# 终止占用进程
taskkill /PID <进程ID> /F

# 重新在 Cursor 中启用 Linear MCP
```

### Git 推送失败

```bash
# 检查远程仓库
git remote -v

# 重新设置
git remote set-url origin <仓库地址>
```

### AI 没有执行 Linear 操作

1. 检查 Linear MCP 是否已启用（Cursor Settings → MCP）
2. 检查 .cursorrules 文件是否存在
3. 确认说的话包含明确的触发词

---

## 七、快速检查清单

开始新项目前确认：

- [ ] Linear MCP 已配置且已授权
- [ ] Linear 中已创建团队（设置了合适的 Key）
- [ ] 项目根目录有 .cursorrules 文件
- [ ] .cursorrules 中的项目名和团队名已修改
- [ ] Git 已初始化

每日开发确认：

- [ ] 只有一个任务处于 In Progress
- [ ] 在正确的分支上开发
- [ ] 定期提交代码
- [ ] 完成后更新任务状态
